function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Array.prototype.forEach||(Array.prototype.forEach=function(t,n){"use strict";var e,o;if(null==this)throw new TypeError("this is null or not defined");var i,r=Object(this),a=r.length>>>0;if("[object Function]"!=={}.toString.call(t))throw new TypeError(t+" is not a function");for(arguments.length>=2&&(e=n),o=0;a>o;)o in r&&(i=r[o],t.call(e,i,o,r)),o++});var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),Document=function(){function t(n){_classCallCheck(this,t),this.callbacks=[],this.eventNamesToListen=n;var e=this;this._notified=!1,this.listener=function(){e._notifyReady(e.callbacks)}}return _createClass(t,[{key:"begin",value:function(){document.addEventListener(this.eventNamesToListen.document,this.listener),window.addEventListener(this.eventNamesToListen.window,this.listener)}},{key:"end",value:function(){this._notified=!1,document.removeEventListener(this.eventNamesToListen.document,this.listener),window.removeEventListener(this.eventNamesToListen.window,this.listener),this.callbacks=[]}},{key:"ready",value:function(t){this.callbacks.push(t)}},{key:"_notifyReady",value:function(t){this._notified||(this._notified=!0,t.forEach(function(t){t()}),t=[])}},{key:"_documentIsReady",value:function(){var t=document.readyState,n=document.documentElement.doScroll,e="complete"===t,o="loading"===t;return e?!0:o||n?!1:!0}}]),t}();window.RayNS=window.RayNS||{},window.RayNS.Document=Document;var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),ComponentData=function(){function t(n,e,o){_classCallCheck(this,t),this.DOMElement=n,this.bus=e,this.commandDispatcher=o}return _createClass(t,[{key:"_init",value:function(){this.topics={},this.id=0}}],[{key:"create",value:function(n,e,o){return new t(n,e,o)}}]),t}();window.RayNS=window.RayNS||{},window.RayNS.ComponentData=ComponentData,function(t){t.RayNS=t.RayNS||{};var n=function(t,n){this.componentConstructorFn=t,this.data=n};n.prototype.execute=function(){return new this.componentConstructorFn(this.data)},n.DATA_RAY_ATTR="data-ray-component",n.create=function(t,e){function o(t){var n=t.split(".");return n.pop()}function i(t){var n=t.split(".");n.pop();var e=window;return n.forEach(function(t){e=e[t]}),e}var r=RayNS.ComponentData.create(t,e),a=t.getAttribute(n.DATA_RAY_ATTR),c=o(a),s=i(a),u=s[c];if(void 0==u)throw new Error("<"+c+"> JS object not Found");return new n(u,r)},t.RayNS.Component=n}(window),function(t){t.RayNS=t.RayNS||{};var n=RayNS.Component,e=function(t){this.eventBus=t};e.EXECUTED_ATTRIBUTE="data-ray-component-executed",e.prototype.loadNewComponents=function(){var t=RayNS.Component.DATA_RAY_ATTR,o=this;return document.querySelectorAll("["+t+"]").forEach(function(t){try{var i=e.EXECUTED_ATTRIBUTE;if(t.hasAttribute(i))return;t.setAttribute(i,"");var r=n.create(t,o.eventBus);r.execute()}catch(a){o.eventBus.trigger("ray.error",a),console.log("RayJS: Error loading components: "+a.message)}})},t.RayNS.CommandDispatcher=e}(window),function(t){t.RayNS=t.RayNS||{};var n=function(){this._init()};n.prototype._init=function(){this.topics={},this.id=0},n.prototype.on=function(t,n){return this.topics[t]||(this.topics[t]=[]),this.id++,this.topics[t].push({id:this.id,callback:n}),this.id},n.prototype.off=function(t){for(var n in this.topics){if(!this.topics[n])return!1;for(var e=0,o=this.topics[n].length;o>e;e++)if(this.topics[n][e].id===t)return this.topics[n].splice(e,1),!0}return!1},n.prototype.end=function(){this._init()},n.prototype.trigger=function(t,n){if(!this.topics[t])return!1;var e=this;return setTimeout(function(){var o=e.topics[t];o&&o.forEach(function(t){t.callback(n)})},0),!0},n.create=function(){return new n},t.RayNS.EventBus=n}(window),function(t){t.RayNS=t.RayNS||{};var n=function(t){this.eventNamesToListen=t||{document:"DOMContentLoaded",window:"load"},this.raydocument=new RayNS.Document(this.eventNamesToListen),this.eventBus=RayNS.EventBus.create(),this.commandDispatcher=new RayNS.CommandDispatcher(this.eventBus)};n.prototype.begin=function(){this.raydocument.begin();var t=this;this.raydocument.ready(function(){t.commandDispatcher.loadNewComponents()}),this.intervalId=setInterval(function(){t.commandDispatcher.loadNewComponents()},400)},n.prototype.end=function(){clearInterval(this.intervalId),this.raydocument.end(),this.eventBus.end()},n.prototype.getCommandDispatcher=function(){return this.commandDispatcher},n.createBus=function(){return RayNS.EventBus.create()},n.createComponent=function(t,n){return RayNS.Component.create(t,n)},t.RayNS.Ray=n}(window);